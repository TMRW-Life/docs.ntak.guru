# Report Object

On this page, you can find information about the report object.
The report object serves as the response for every report request made and also serves as the content of the webhook.
It contains important data and details related to the generated report, allowing you to access and process the relevant information efficiently.

## Properties

### `id`

The unique identifier of the report in NTAK.guru.

| Type     | Format |
|:---------|:-------|
| `string` | `uuid` |

### `messageId`

This identifier corresponds to the report that was submitted to the government's NTAK system.

For most reports, the identifier is generated by NTAK.guru. \
If the report type is `daily_close`, then the ID comes from the parent `scheduler` report's response.

| Type     | Format |
|:---------|:-------|
| `string` | `uuid` |

### `service`

| Type   | Values           |
|:-------|:-----------------|
| `enum` | `ntak` \| `viza` |

### `status`

| Type   | Values                            |
|:-------|:----------------------------------|
| `enum` | `pending` \| `success` \| `error` |

### `reason`

The status of the report can be described as a concise and readily understandable indicator of its current condition or progress.

| Type     | Format |
|:---------|:-------|
| `string` |        |

### `type`

The `type` property of the report specifies its category or classification.
The workflow within NTAK.guru is determined by the type of the report.
Different types of reports may follow distinct processes or have specific requirements and actions associated with them.

| Type   | Values                                                                                      |
|:-------|:--------------------------------------------------------------------------------------------|
| `enum` | `reservation` \| `room_change` \| `check_in` \| `check_out` \| `scheduler` \| `daily_close` |

### `context`

The original and unmodified object data that come from your PMS.\
The `context` holds the data and provides the necessary information for interpreting and processing the report based on its type.

| Type                | Format |
|:--------------------|:-------|
| `object` \| `array` |        |

### `response`

The `response` property of the report comprises the result of the report.

Initially, when the report arrives and is in the queue, the `response` is set to `null`.

Upon the report's arrival at NTAK.guru, we perform validation to ensure the validity of the `context` before sending it to the NTAK system.
If the validation fails, the `response` property will contain an error message.
You can refer to [Laravel's documentation](https://laravel.com/docs/validation#validation-error-response-format) on validation error format to understand the structure and format of the error messages in more detail.

Unfortunately we cannot validate everything, so the NTAK system may still reject the report.
In this case, the `response` property will contain an error message from the NTAK system.

Sometimes the communication between NTAK.guru and the NTAK system may fail, even after the automatic retries.
In this case, the `response` property will contain an error message about the communication failure.
When this happens, you can retry the report without any changes.

If the validation succeeds, the `response` property will contain the response from the NTAK system.

| Type                          | Format |
|:------------------------------|:-------|
| `object` \| `array` \| `null` |        |

## Example

```json copy
{
  "id": "00000000-0000-0000-0000-000000000000",
  "messageId": "00000000-0000-0000-0000-000000000000",
  "service": "ntak",
  "status": "success",
  "reason": "Successful report",
  "type": "reservation",
  "context": {
    "arrival": "2024-04-01",
    "cancelled": false,
    "departure": "2024-04-04",
    "grossAmount": 150000.0,
    "guestCount": 2,
    "marketSegment": "leisure_personal",
    "nationality": "HU",
    "occurredAt": "2024-03-26 12:53:12",
    "reservationNumber": "xxx000",
    "reservedAt": "2024-03-10 22:29:23",
    "salesChannel": "agency_online",
    "bookedResidentialUnits": [
      {
        "type": "other",
        "capacity": 2
      }
    ]
  },
  "response": {
    "foglalasEsemenyResponse": []
  },
  "createdAt": "2024-03-26T12:53:12+00:00",
  "updatedAt": "2024-03-26T12:53:20+00:00"
}
```